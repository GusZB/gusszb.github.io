<!DOCTYPE html>
<html>
<head>
    <title>Bienvenida del usuario</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-ui-1.8.17.custom.min.js"></script>
    <script type="text/javascript" src="jspdf.js"></script>
    <script type="text/javascript" src="jspdf.plugin.addimage.js"></script>
    <script type="text/javascript" src="jspdf.plugin.standard_fonts_metrics.js"></script>
    <script type="text/javascript" src="jspdf.plugin.split_text_to_size.js"></script>
    <script type="text/javascript" src="jspdf.plugin.from_html.js"></script>

    <script type="text/javascript">
        function suma(event) {
            event.preventDefault();

            let pre1 = parseInt(document.forms[0].p1.value);
            let pre2 = parseInt(document.forms[0].p2.value);
            let pre3 = parseInt(document.forms[0].p3.value);
            let pre4 = parseInt(document.forms[0].p4.value);
            let pre5 = parseInt(document.forms[0].p5.value);
            let pre6 = parseInt(document.forms[0].p6.value);
            let pre7 = parseInt(document.forms[0].p7.value);
            let pre8 = parseInt(document.forms[0].p8.value);
            let pre9 = parseInt(document.forms[0].p9.value);
            let pre10 = parseInt(document.forms[0].p10.value);
            let pre11 = parseInt(document.forms[0].p11.value);
            let pre12 = parseInt(document.forms[0].p12.value);
            let pre13 = parseInt(document.forms[0].p13.value);
            let pre14 = parseInt(document.forms[0].p14.value);
            let pre15 = parseInt(document.forms[0].p15.value);
            let pre16 = parseInt(document.forms[0].p16.value);
            let pre17 = parseInt(document.forms[0].p17.value);
            let pre18 = parseInt(document.forms[0].p18.value);
            let pre19 = parseInt(document.forms[0].p19.value);
            let pre20 = parseInt(document.forms[0].p20.value);
            let pre21 = parseInt(document.forms[0].p21.value);

            let total = pre1 + pre2 + pre3 + pre4 + pre5 + pre6 + pre7 + pre8 + pre9 +
                        pre10 + pre11 + pre12 + pre13 + pre14 + pre15 + pre16 + pre17 + pre18 +
                        pre19 + pre20 + pre21;

            let faseres = "";
            if (total >= 0 && total <= 12)
                faseres = "Fase de Apertura";
            else if (total >= 13 && total <= 24)
                faseres = "Fase de Dominio";
            else if (total >= 25 && total <= 36)
                faseres = "Fase de Reconocimiento";
            else if (total >= 37 && total <= 48)
                faseres = "Fase de Riesgo Inminente";
            else
                faseres = "Fase de Consumacion";

            let nombre = document.getElementById('nombre').value;
            let edad = document.getElementById('edad').value;

            let doc = new jsPDF();
            doc.setFontSize(14);
            doc.text(20, 10, "Tus resultados: " );
            doc.text(20, 20, "Nombre: " + nombre ); 
            doc.text(20, 30, "Edad: " + edad + " años");
            doc.text(20, 40, "Puntuacion: " + total + " puntos");
            doc.text(20, 50, "Fase: " + faseres);
            let string = doc.output('datauristring');
            $('iframe').attr('src', string);
        }

        $(document).ready(function() {
            $("#myform").submit(suma);
        });
    </script>
</head>
<body>
	<h2>TEST PARA MEDIR EL NIVEL DE RIESGO DE VIOLENCIA PARA MUJERES EN EL ESTADO DE SLP</h2>
  <p>INSTRUCCIONES: Lee cuidadosamente y responde una sola opción</p>
  <form id="myform" onsubmit="return suma();">
	1.- Dentro de tu núcleo familiar (padre, madre, hermanos) en algún momento vivieron violencia
(amenazas, gritos, golpes)?
<input id="p1" name="p1" type="radio"  value=3> SI
<input id="p1" name="p1" type="radio"  value=2> A VECES
<input id="p1" name="p1" type="radio"  value=1> RARA VEZ
<input id="p1" name="p1" type="radio"  value=0 checked> NO
<br>

2.-¿Tu pareja te cela?
SI<input id="p2" name="p2" type="radio" value=3>
A VECES<input id="p2"  name="p2" type="radio" value=2>
RARA VEZ<input id="p2"  name="p2" type="radio" value=1>
NO<input id="p2"  name="p2" type="radio" value=0 checked>
<br>

3.-¿Has sufrido descalificaciones o humillaciones en público por parte de tu pareja?
SI<input id="p3"  name="p3" type="radio" value=3>
A VECES<input id="p3"  name="p3" type="radio" value=2>
RARA VEZ<input id="p3"  name="p3" type="radio" value=1>
NO<input id="p3"  name="p3" type="radio" value=0 checked>
<br>

4.-¿Tu pareja te responsabiliza de los problemas que tienen?
SI<input id="p4"  name="p4" type="radio" value=3>
A VECES<input id="p4"  name="p4" type="radio" value=2>
RARA VEZ<input id="p4"  name="p4" type="radio" value=1>
NO<input id="p4"  name="p4" type="radio" value=0 checked>
<br>

5.-¿Te controla, todo el tiempo o quiere saber dónde estás?
SI<input id="p5"  name="p5" type="radio" value=3>
A VECES<input id="p5"  name="p5" type="radio" value=2>
RARA VEZ<input id="p5"  name="p5" type="radio" value=1>
NO<input id="p5"  name="p5" type="radio" value=0 checked>
<br>

6.-¿Te chantajea, manipula o soborna para hacer cosas?
SI<input id="p6"  name="p6" type="radio" value=3>
A VECES<input id="p6"  name="p6" type="radio" value=2>
RARA VEZ<input id="p6"  name="p6" type="radio" value=1>
NO<input id="p6"  name="p6" type="radio" value=0 checked>
<br>

7.-¿Te limita o prohibe hacer cosas?
SI<input id="p7"  name="p7" type="radio" value=3>
A VECES<input id="p7"  name="p7" type="radio" value=2>
RARA VEZ<input id="p7"  name="p7" type="radio" value=1>
NO<input id="p7"  name="p7" type="radio" value=0 checked>
<br>

8.-¿Te controla o limita el recurso económico, o amenaza con quitártelo a ti y tus hijos?
SI<input id="p8"  name="p8" type="radio" value=3>
A VECES<input id="p8"  name="p8" type="radio" value=2>
RARA VEZ<input id="p8"  name="p8" type="radio" value=1>
NO<input id="p8"  name="p8" type="radio" value=0 checked>
<br>

9.-Durante las discusiones, ¿tu pareja se pone violenta y ha destruido objetos?
SI<input id="p9"  name="p9" type="radio" value=3>
A VECES<input id="p9"  name="p9" type="radio" value=2>
RARA VEZ<input id="p9"  name="p9" type="radio" value=1>
NO<input id="p9"  name="p9" type="radio" value=0 checked>
<br>

10.-¿Tu pareja te obliga a tener relaciones sexuales sin tu consentimiento o sin protección?
SI<input id="p10"  name="p10" type="radio" value=3>
A VECES<input id="p10"  name="p10" type="radio" value=2>
RARA VEZ<input id="p10"  name="p10" type="radio" value=1>
NO<input id="p10"  name="p10" type="radio" value=0 checked>
<br>

11.-¿Tu pareja te acaricia violentamente?
SI<input id="p11"  name="p11" type="radio" value=3>
A VECES<input id="p11"  name="p11" type="radio" value=2>
RARA VEZ<input id="p11"   name="p11" type="radio" value=1>
NO<input id="p11"  name="p11" type="radio" value=0 checked>
<br>

12.-¿Cuando discutes con tu pareja, te hace agresiones físicas (empujones, patadas, puñetazos, jalones, te azota) con alguna arma (blanca o fuego) que te dejan marcas?
SI<input id="p12"  name="p12" type="radio" value=3>
A VECES<input id="p12"  name="p12" type="radio" value=2>
RARA VEZ<input id="p12"  name="p12" type="radio" value=1>
NO<input id="p12"  name="p12" type="radio" value=0 checked>
<br>

13.-¿Has recibido atención médica y/o psicológica por la violencia ejercida por tu pareja?
SI<input id="p13"  name="p13" type="radio" value=3>
A VECES<input id="p13"  name="p13" type="radio" value=2>
RARA VEZ<input id="p13"  name="p13" type="radio" value=1>
NO<input id="p13"  name="p13" type="radio" value=0 checked>
<br>

14.-¿Hab¿as realizado denuncias anteriormente por violencia familiar, acoso laboral y/o sexual o lesiones?
SI<input id="p14"  name="p14" type="radio" value=3>
A VECES<input id="p14"  name="p14" type="radio" value=2>
RARA VEZ<input id="p14"  name="p14" type="radio" value=1>
NO<input id="p14"  name="p14" type="radio" value=0 checked>
<br>

15.-¿Debido a la violencia decidiste separarte o terminar la relación?
SI<input id="p15"  name="p15" type="radio" value=3>
A VECES<input id="p15"  name="p15" type="radio" value=2>
RARA VEZ<input id="p15"  name="p15" type="radio" value=1>
NO<input id="p15"  name="p15" type="radio" value=0 checked>
<br>

16.-¿Seguiste con el proceso de tu denunca o la retiraste?
SI<input id="p16"  name="p16" type="radio" value=3>
A VECES<input id="p16"  name="p16" type="radio" value=2>
RARA VEZ<input id="p16"  name="p16" type="radio" value=1>
NO<input id="p16"  name="p16" type="radio" value=0 checked>
<br>

17.-¿Por qué motivo retiraste la denuncia?
AMOR<input id="p17"  name="p17" type="radio" value=3>
AMENAZAS<input id="p17"  name="p17" type="radio" value=2>
MIEDO<input id="p17"  name="p17" type="radio" value=1>
FALTA DE INTERES DE LAS AUTORIDADES<input id="p17" name="p17" type="radio" value=0 checked>
<br>

18.-Los episodios de violencia ¿son más frecuentes y extremos?
SI<input id="p18"  name="p18" type="radio" value=3>
A VECES<input id="p18"  name="p18" type="radio" value=2>
RARA VEZ<input id="p18"  name="p18" type="radio" value=1>
NO<input id="p18"  name="p18" type="radio" value=0 checked>
<br>

19.-¿Has recibido hostigamiento constante o amenazas de muerte por parte de tu agresor?
SI<input id="p19"  name="p19" type="radio" value=3>
A VECES<input id="p19"  name="p19" type="radio" value=2>
RARA VEZ<input id="p19"  name="p19" type="radio" value=1>
NO<input id="p19"  name="p19" type="radio" value=0 checked>
<br>

20.-¿Las autoridades emitieron medidas cautelares y de protección para salvaguardar tu integridad (y la de tus hijos)?
SI<input id="p20"  name="p20" type="radio" value=3>
A VECES<input id="p20"  name="p20" type="radio" value=2>
RARA VEZ<input id="p20"  name="p20" type="radio" value=1>
NO<input id="p20"  name="p20" type="radio" value=0 checked>
<br>

21.-¿Tu agresor ya ha intentado matarte?
SI<input id="p21"  name="p21" type="radio" value=3>
A VECES<input id="p21"  name="p21" type="radio" value=2>
RARA VEZ<input id="p21"  name="p21" type="radio" value=1>
NO<input id="p21"  name="p21" type="radio" value=0 checked><br>

        <br>Nombre
        <input id="nombre" name="nom" type="text"/><br>
        <br>Edad
        <input id="edad" name="edad" type="text"/>
        <br>
<br><input type="submit" class="btn btn-primary" ></p>
    </form>
    <iframe style="width:100%; height:500px;"></iframe>
</body>
</html>
